import random
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import ApplicationBuilder, CommandHandler, ContextTypes, CallbackQueryHandler

# Вставь сюда свой токен от BotFather
TOKEN = "7583514113:AAEfqIEBSTMWIorJ-Q1qqVcE_X48-jS_SSw"



cards = [
    {
        "name": "Башня (XVI)",
        "type": "Силовая тренировка",
        "attributes": "Гири, цепи",
        "interpretation": "Разрушаем старое тело — строим новое!"
    },
    {
        "name": "Дурак (0)",
        "type": "Кардио / Фристайл",
        "attributes": "Скакалка, бег",
        "interpretation": "Двигайся как хочешь! Спонтанность — сила."
    },
    {
        "name": "Звезда (XVII)",
        "type": "Восстановление / Растяжка",
        "attributes": "Йога, дыхание",
        "interpretation": "Ты заслуживаешь отдых. Восстановление — часть пути."
    },
    {
        "name": "Маг (I)",
        "type": "Функциональная тренировка",
        "attributes": "гантели, мяч, TRX, эспандеры",
        "interpretation": "Использование всех инструментов тела и ума"
  },
 {
    "name": "Жрица (II)",
    "type": "Йога / растяжка / медитация",
    "attributes": "коврик, свечи, мягкий свет",
    "interpretation": "Внутренний фокус, интуиция и дыхание"
  },
  {
    "name": "Императрица (III)",
    "type": "Танец / флоу / пилатес",
    "attributes": "фитбол, ленты, плавные движения",
    "interpretation": "Тело в удовольствии, феминная энергия"
  },
  {
    "name": "Император (IV)",
    "type": "Силовая классика / армейский стиль",
    "attributes": "жим, штанга, армейский пресс",
    "interpretation": "Дисциплина и структура"
  },
  {
    "name": "Жрец (V)",
    "type": "Тренировка по правилам / техника / тренер",
    "attributes": "доска с программой, секундомер, тренер рядом",
    "interpretation": "Учёба и следование системе"
  },
  {
    "name": "Влюблённые (VI)",
    "type": "Парная тренировка",
    "attributes": "упражнения в паре, синхронные действия",
    "interpretation": "Гармония и взаимодействие"
  },
  {
    "name": "Колесница (VII)",
    "type": "Интенсив / спринты / вело",
    "attributes": "велотренажёр, беговая дорожка",
    "interpretation": "Напор, достижение цели, контроль"
  },
  {
    "name": "Сила (VIII)",
    "type": "Медленное силовое с контролем",
    "attributes": "гири, утяжелители, ласты",
    "interpretation": "Спокойная, внутренняя сила"
  },
  {
    "name": "Отшельник (IX)",
    "type": "Соло-тренировка / прогулка / растяжка",
    "attributes": "наушники, тишина, спокойствие",
    "interpretation": "Время наедине, внимание к телу"
  },
  {
    "name": "Колесо Фортуны (X)",
    "type": "Случайная тренировка (рандомайзер)",
    "attributes": "колесо упражнений, dice workout",
    "interpretation": "Удача рулит, непредсказуемость"
  },
  {
    "name": "Справедливость (XI)",
    "type": "Баланс тела: координация / осанка",
    "attributes": "балансборд, зеркала",
    "interpretation": "Равновесие и симметрия"
  },
  {
    "name": "Повешенный (XII)",
    "type": "Стретчинг / инверсия / восстановление",
    "attributes": "гамаки, инверсии, роллы",
    "interpretation": "Пауза, изменение перспективы"
  },
  {
    "name": "Смерть (XIII)",
    "type": "Хардкор / HIIT / «умри, но сделай»",
    "attributes": "баттл-роуп, интервалы, мокрая майка",
    "interpretation": "Трансформация через боль"
  },
  {
    "name": "Умеренность (XIV)",
    "type": "Восстановление / плавные циклы",
    "attributes": "foam roller, вода, мягкий флоу",
    "interpretation": "Баланс и забота о себе"
  },
  {
    "name": "Дьявол (XV)",
    "type": "Жесткая силовая / кроссфит / ад",
    "attributes": "цепи, гири, тяжёлое железо",
    "interpretation": "Испытание на прочность, искушение"
  },
  {
    "name": "Луна (XVIII)",
    "type": "Ночное кардио / танец в темноте / мистика",
    "attributes": "неон, тень, загадка",
    "interpretation": "Подсознательное и текучее"
  },
  {
    "name": "Солнце (XIX)",
    "type": "Энергия / групповая тренировка / радость",
    "attributes": "музыка, свет, энергия",
    "interpretation": "Радость движения, витальность"
  },
  {
    "name": "Страшный суд (XX)",
    "type": "Финальный тест / челлендж / прогресс",
    "attributes": "таймер, тест, повторение",
    "interpretation": "Проверка на результат и перерождение"
  },
  {
    "name": "Мир (XXI)",
    "type": "Релакс / танец / круговая гармония",
    "attributes": "обруч, круговая тренировка, завершение",
    "interpretation": "Единство тела и духа"
  },
  {

  "name": "I Жезлов",
  "type": "Начало нового сплита",
  "attributes": "Первый день программы, энергия",
  "interpretation": "Всплеск энтузиазма, огонь в теле, жажда действия"
},
{
  "name": "II Жезлов",
  "type": "Планирование тренировок",
  "attributes": "Тетрадь, выбор маршрута",
  "interpretation": "Ты у карты — надо решить, куда двигаться"
},
{
  "name": "III	Жезлов",
  "type": "Увеличение объёма",
  "attributes": "Длительное кардио, бег",
  "interpretation": "Взгляд вдаль, стратегия роста, расширение горизонтов"
},
{
  "name": "IV Жезлов",
  "type": "Танец, групповая радость",
  "attributes": "Зумба, победа после марафона",
  "interpretation": "Праздник тела, общая победа, «танцуем вместе»"
},
{
  "name": "V Жезлов",
  "type": "Соревнование",
  "attributes": "Спарринг, челленджи",
  "interpretation": "Игра мышц и амбиций — борьба без злобы"
},
{
  "name": "VI Жезлов",
  "type": "Победа, личный рекорд",
  "attributes": "Запись прогресса, кубок",
  "interpretation": "Ты на пьедестале — труд вознаграждён"
},
{
  "name": "VII Жезлов",
  "type": "Отстаивание позиции",
  "attributes": "Статические упражнения",
  "interpretation": "Сопротивление, удержание, защита своих результатов"
},
{
  "name": "VIII Жезлов",
  "type": "Быстрые интервалы",
  "attributes": "Табата, спринты",
  "interpretation": "Всё происходит быстро — действуй точно"
},
{
  "name": "IX Жезлов",
  "type": "Выносливость",
  "attributes": "Последний подход, не сдаваться",
  "interpretation": "Уже на грани, но держишься — ты почти у цели"
},
{
  "name": "X Жезлов",
  "type": "Перетрен / тяжесть",
  "attributes": "Перенос веса, «слишком много»",
  "interpretation": "Время отпустить лишнее — ты несёшь не только штангу, но и перегруз"
},
{
  "name": "Паж Жезлов",
  "type": "Интерес к новому",
  "attributes": "Новая студия, пробная тренировка",
  "interpretation": "Искра любопытства — первый шаг на неизведанную территорию"
},
{
  "name": "Рыцарь Жезлов",
  "type": "Агрессивная динамика",
  "attributes": "Кроссфит, баттл-роуп",
  "interpretation": "Максимум огня, быстрая атака, всё на скорости"
},
{
  "name": "Королева Жезлов",
  "type": "Лёгкость и стиль",
  "attributes": "Танцевальные классы, флоу",
  "interpretation": "Уверенность в себе, ты сияешь в движении"
},
{
  "name": "Король Жезлов",
  "type": "Лидер команды",
  "attributes": "Ведение тренировки, коуч",
  "interpretation": "Вдохновляешь и ведёшь — ты пример для других"
},
{
 "name": "I Кубков",
  "type": "Релакс, день восстановления",
  "attributes": "Ванна, вода, лёгкая йога",
  "interpretation": "Перезагрузка через удовольствие, энергия тела возвращается"
},
{
  "name": "II Кубков",
  "type": "Парная практика",
  "attributes": "Акро-йога, поддержка",
  "interpretation": "Связь, доверие, совместное движение"
},
{
  "name": "III Кубков",
  "type": "Фитнес-вечеринка",
  "attributes": "Зумба, групповой кайф",
  "interpretation": "Радость в теле и компании — танец как праздник"
},
{
  "name": "IV Кубков",
  "type": "Потеря интереса",
  "attributes": "Мотивация упала, день отдыха",
  "interpretation": "Скука, отстранённость — нужен перерыв или вдохновение"
},
{
  "name": "V Кубков",
  "type": "Тренировка после срыва",
  "attributes": "Работа с эмоциями",
  "interpretation": "Тело в грусти, но ты возвращаешься — медленно, честно"
},
{
  "name": "VI Кубков",
  "type": "Ностальгия, старые тренировки",
  "attributes": "Вернуться к истокам",
  "interpretation": "Воспоминания о первых шагах — вернись туда, где было легко"
},
{
  "name": "VII Кубков",
  "type": "Слишком много вариантов",
  "attributes": "Переизбыток тренировок/диет",
  "interpretation": "Расфокус, иллюзии — пора выбрать одно"
},
{
  "name": "VIII Кубков",
  "type": "Уход из спортзала",
  "attributes": "Закончить цикл, начать новое",
  "interpretation": "Отпустить то, что больше не даёт силы"
},
{
  "name": "IX Кубков",
  "type": "Самодовольство",
  "attributes": "Чилл-день, прогресс",
  "interpretation": "Удовольствие от сделанного, позволение себе отдохнуть"
},
{
  "name": "X Кубков",
  "type": "Гармония тела и души",
  "attributes": "Совместная йога, счастье",
  "interpretation": "Ты в потоке, тело и сердце поют вместе"
},
{
  "name": "Паж Кубков",
  "type": "Творческая тренировка",
  "attributes": "Танцы, капоэйра, игра",
  "interpretation": "Внутренний ребёнок тренируется — спонтанно, легко"
},
{
  "name": "Рыцарь Кубков",
  "type": "Мягкая кардио-сессия",
  "attributes": "Велотренажёр с видом",
  "interpretation": "Комфортное движение, красота и ритм"
},
{
  "name": "Королева Кубков",
  "type": "Эмоциональный баланс",
  "attributes": "Медитация, бани, массаж",
  "interpretation": "Забота, принятие, слушание себя в теле"
},
{
  "name": "Король Кубков",
  "type": "Контроль эмоций в спорте",
  "attributes": "Ментальная подготовка, focus work",
  "interpretation": "Внутренний стержень — спокойствие перед соревнованием"
},
{
  "name": "I Мечей",
  "type": "Ясная цель",
  "attributes": "Планирование сплита, вызов",
  "interpretation": "Ментальная чёткость — ты знаешь, зачем делаешь это"
},
{
  "name": "II Мечей",
  "type": "Сомнение, выбор",
  "attributes": "Кардио или силовая?",
  "interpretation": "Ментальный клинч — важно услышать, что просит тело"
},
{
  "name": "III Мечей",
  "type": "Перетрен, травма",
  "attributes": "Боль, восстановление",
  "interpretation": "Сердце и мышцы болят — пора сделать паузу"
},
{
  "name": "IV Мечей",
  "type": "Вынужденный отдых",
  "attributes": "Сон, перерыв, массаж",
  "interpretation": "Не активность, а восстановление даст тебе силу"
},
{
  "name": "V Мечей",
  "type": "Перетягивание одеяла",
  "attributes": "Сравнение с другими",
  "interpretation": "Эго мешает — важно вспомнить: ты тренируешься для себя"
},
{
  "name": "VI Мечей",
  "type": "Мягкий выход из режима",
  "attributes": "Переезд, адаптация",
  "interpretation": "Смена среды — мягкий переход, не бросай себя"
},
{
  "name": "VII Мечей",
  "type": "Лень, обход плана",
  "attributes": "“Схалтурил” сегодня",
  "interpretation": "Сам себе враг — маленький обман ведёт к сбою"
},
{
  "name": "VII Мечей",
  "type": "Страх тренировки",
  "attributes": "Ментальные блоки",
  "interpretation": "Психологическая ловушка — движение начнётся с головы"
},
{
  "name": "IX Мечей",
  "type": "Бессонница, тревожность",
  "attributes": "Поздняя тренировка + стресс",
  "interpretation": "Устал не телом, а разумом — выдохни"
},
{
  "name": "X Мечей",
  "type": "Полное истощение",
  "attributes": "Точка перелома, надо менять подход",
  "interpretation": "Всё, точка. Надо пересобрать себя с заботой"
},
{
  "name": "Паж Мечей",
  "type": "Учёба технике",
  "attributes": "Новая форма, гайды",
  "interpretation": "Ты изучаешь, как двигаться лучше — умное тело"
},
{
  "name": "Рыцарь Мечей",
  "type": "Жёсткая работа",
  "attributes": "Жим на максимум",
  "interpretation": "Сила через волю — рывок без компромиссов"
},
{
  "name": "Королева Мечей",
  "type": "Холодный анализ",
  "attributes": "План питания, лог тренировок",
  "interpretation": "Логика рулит — трекеры, таблицы, структура"
},
{
  "name": "Король Мечей",
  "type": "Рациональное лидерство",
  "attributes": "Тренер-ментор, режим 100%",
  "interpretation": "Ум управляет телом — система и дисциплина на максимум"
},
{
  "name": "I Пентаклей",
  "type": "Новый план питания/режима",
  "attributes": "ЗОЖ старт",
  "interpretation": "Начало пути в тело: питание, режим, основа"
},
{
  "name": "II Пентаклей",
  "type": "Баланс жизни и спорта",
  "attributes": "Тайм-менеджмент",
  "interpretation": "Ловкость, смена задач — балансируешь между разным"
},
{
  "name": "III Пентаклей",
  "type": "Работа в команде",
  "attributes": "Групповой кроссфит",
  "interpretation": "Совместный труд, общая цель, поддержка"
},
{
  "name": "IV Пентаклей",
  "type": "Режим, но в ограничении",
  "attributes": "Тренировка по графику",
  "interpretation": "Контроль, но без гибкости — не перегни палку"
},
{
  "name": "V Пентаклей",
  "type": "Травма, упадок",
  "attributes": "Болезнь, лень",
  "interpretation": "Тело говорит «стоп» — не игнорируй сигналы"
},
{
  "name": "VI Пентаклей",
  "type": "Поддержка / делиться опытом",
  "attributes": "Напарник помогает",
  "interpretation": "Ты отдаёшь — и получаешь. Обмен энергией и знаниями"
},
{
  "name": "VII Пентаклей",
  "type": "Ожидание результата",
  "attributes": "Медленный прогресс",
  "interpretation": "Терпение. Рост идёт под землёй"
},
{
  "name": "VIII Пентаклей",
  "type": "Постоянный труд",
  "attributes": "Монотонный план — дисциплина",
  "interpretation": "День за днём. Ремесло тела"
},
{
  "name": "IX Пентаклей",
  "type": "Физическая форма достигнута",
  "attributes": "Наслаждение телом",
  "interpretation": "Ты в теле, ты — результат. Гармония в физике"
},
{
  "name": "X Пентаклей",
  "type": "Наследие, стабильность",
  "attributes": "Спорт как стиль жизни",
  "interpretation": "Ты встроил тренировку в быт — это больше, чем привычка"
},
{
  "name": "Паж Пентаклей",
  "type": "Ученик ЗОЖ",
  "attributes": "Начало пути, дисциплина",
  "interpretation": "Любопытство к телу, первые шаги, готов учиться"
},
{
  "name": "Рыцарь Пентаклей",
  "type": "Медленный стабильный прогресс",
  "attributes": "Шаг за шагом",
  "interpretation": "Без фанатизма — зато стабильно и навсегда"
},
{
  "name": "Королева Пентаклей",
  "type": "Забота о теле",
  "attributes": "Массаж, уход, питание",
  "interpretation": "Твоё тело — храм. Ты ухаживаешь с любовью"
},
{
  "name": "Король Пентаклей",
  "type": "Максимум формы",
  "attributes": "Сбалансированный атлет",
  "interpretation": "Ты в пике, но и в балансе. Высший уровень устойчивости"
}
]

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    keyboard = [
        [InlineKeyboardButton("Вытянуть карту 🃏", callback_data="draw_card")]
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)
    await update.message.reply_text(
        "Привет! Нажми на кнопку, чтобы вытянуть карту с тренировкой.",
        reply_markup=reply_markup
    )

async def button_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()

    if query.data == "draw_card":
        card = random.choice(cards)
        msg = (
            f"🃏 *{card['name']}*\n\n"
            f"💪 *Тренировка:* {card['type']}\n"
            f"🛠 *Инструменты:* {card['attributes']}\n"
            f"📖 _{card['interpretation']}_"
        )
        keyboard = [
            [InlineKeyboardButton("Вытянуть карту ещё 🃏", callback_data="draw_card")],
            [InlineKeyboardButton("Перезапустить 🔄", callback_data="restart")]
        ]
        reply_markup = InlineKeyboardMarkup(keyboard)

        await query.message.edit_text(msg, reply_markup=reply_markup, parse_mode='Markdown')

    elif query.data == "restart":
        keyboard = [
            [InlineKeyboardButton("Вытянуть карту 🃏", callback_data="draw_card")]
        ]
        reply_markup = InlineKeyboardMarkup(keyboard)

        await query.message.edit_text(
            "Привет! Нажми на кнопку, чтобы вытянуть карту с тренировкой.",
            reply_markup=reply_markup
        )

if __name__ == "__main__":
    app = ApplicationBuilder().token(TOKEN).build()

    app.add_handler(CommandHandler("start", start))
    app.add_handler(CallbackQueryHandler(button_handler))

    app.run_polling()
